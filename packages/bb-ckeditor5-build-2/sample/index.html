<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>CKEditor 5 – document editor build – development sample</title>
	<style>
		body {
			margin: 20px auto;
		}

		.editable-container-super {
			display: flex;
		}

		.editable-container,
		.toolbar-container {
			position: relative;
			border: 1px solid #ddd;
			background: #eee;
		}

		#sidebar {
			background: #EEE;
			width: 30%;
			padding: 10px;
		}

		.toolbar-container {
			padding: 1em;
		}

		.editable-container {
			padding: 2em;
			width: 70%;
		}

		.editable-container .ck-editor__editable {
			/* min-height: 200px; */
			padding: 2em;
			border: 1px #D3D3D3 solid;
			border-radius: var(--ck-border-radius);
			background: white;
			box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
		}

		.w-10 {
			width: 10% !important;
		}

		.w-20 {
			width: 20% !important;
		}

		.w-25 {
			width: 25% !important;
		}

		.w-45 {
			width: 45% !important;
		}

	</style>

	<style>
		.simple-box {
			padding: 10px;
			margin: 1em 0;

			background: rgba(0, 0, 0, 0.1);
			border: solid 1px hsl(0, 0%, 77%);
			border-radius: 2px;
		}

		.simple-box-title,
		.simple-box-description {
			padding: 10px;
			margin: 0;

			background: #FFF;
			border: solid 1px hsl(0, 0%, 77%);
		}

		.simple-box-title {
			margin-bottom: 10px;
		}

	</style>
	<link rel="stylesheet" href="../../../node_modules/bootstrap/dist/css/bootstrap.min.css">
</head>

<body>
	<div class="container-fluid">
		<h3> test</h3>
		<div id="presence-list-container"></div>
		<div class="toolbar-container"></div>


		<div class="editable-container-super">
			<div class="editable-container"></div>
			<div id="sidebar"></div>
		</div>
	</div>


	<script src="../build/ckeditor.js"></script>
	<script>
		const editorData =
			`<p>Some <b>bold</b> text <a href="https://ckeditor.com" download="download">CKEditor decorated</a> and <a href="https://cksource.com">CKSource</a>.</p>
	<p>An "empty" paragraph to paste links:</p>`;

		DecoupledEditor.create(editorData, {
				cloudServices: {
					tokenUrl: 'https://82590.cke-cs.com/token/dev/37623aab5baa9330bd4256d1f257f077e1a0640fd633ca7c73a2896a598a?limit=10',
					uploadUrl: 'https://82590.cke-cs.com/easyimage/upload/',
					webSocketUrl: 'wss://82590.cke-cs.com/ws',
				},
				collaboration: {
					channelId: "test-decoupled-editor-10-test-7111alexajkjj1111"
				},
				sidebar: {
					container: document.querySelector('#sidebar')
				},
				presenceList: {
					container: document.querySelector('#presence-list-container')
				},
				link: {
					data: {
						toc: getTocList,
						abbreviation: gerAbbreviationList,
						reference: getReferenceList
					}
				}
			})
			.then(editor => {
				window.editor = editor;

				document.querySelector('.toolbar-container').appendChild(editor.ui.view.toolbar.element);
				document.querySelector('.editable-container').appendChild(editor.ui.view.editable.element);

				editor.execute('trackChanges');
			})
			.catch(error => {
				console.error('There was a problem initializing the editor.', error);
			});


		function getTocList() {
			const fetchOptions = {
				method: 'get',
				mode: 'no-cors'
			};
			return fetch(`http://localhost:8888/acoms/media/data/guideline/ENAS103/ENAS103_TOC.json`, fetchOptions)
				.then(response => response.json());
		}

		function gerAbbreviationList() {
			const fetchOptions = {
				method: 'get',
				mode: 'no-cors'
			};
			return fetch(`http://localhost:8888/acoms/media/data/guideline/ENAS103/Abbreviations.json`, fetchOptions)
				.then(response => response.json());
		}

		function getReferenceList() {
			const fetchOptions = {
				method: 'get',
				mode: 'no-cors'
			};
			return fetch(
					`http://localhost:8888/acoms/controllers/controller.guidelineOperations.php?operationType=getGuidelineReferenceList&guidelineId=112`,
					fetchOptions)
				.then(response => response.json());
		}

	</script>

</body>

</html>
